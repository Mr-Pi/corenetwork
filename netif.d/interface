#!/bin/sh

netif_pre_up() {
	local count=-1
	local label=""
	for ipnm in $ipaddr $ipaddrs; do
		if [ $count -ge 0 ]
		then
			label=$interface:$count
		fi
		if [ -z "$label" ]
		then
			ip addr add $(get_ipnm_part "$ipnm") \
				broadcast $(get_option "$ipnm" broadcast +)  \
				dev $interface || die "Couldn't add $ipnm to $interface"
		else
			ip addr add $(get_ipnm_part "$ipnm") \
				broadcast $(get_option "$ipnm" broadcast +) \
				label $label dev $interface || die "Couldn't add $ipnm to $interface"
		fi
		count=$(( $count + 1 ))	
	done
}
