#!/bin/sh

netif_depend() {
	[ -n "$slaves" ] && need $slaves
}

netif_pre_up() {
	local slave
	brctl addbr $interface
	if [ -n "$slaves" ]; then
		for slave in ${slaves//netif./}; do
			brctl addif $interface ${slave}
		done
	fi	
	brctl setfd $interface 0 
	for ipnm in $ipaddr $ipaddrs; do
		ip addr add $ipnm dev $interface || die "Couldn't add $ipnm to $interface"
	done
}

netif_post_down() {
	brctl delbr $interface
}
